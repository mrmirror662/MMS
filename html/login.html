<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
    <title>Login</title>
    <link rel="icon" href="https://img.icons8.com/external-flaticons-flat-flat-icons/64/external-academic-university-flaticons-flat-flat-icons-2.png" type="image/x-icon">
  </head>
  <body ng-controller="myController" ng-app="myApp" ng-style="{'background-color': bodyBackgroundColor}" class="transition-colors duration-150 ease-in-out">  
    <div>
      <div class="flex items-center justify-center mt-8">
        <div class="navbar mr-4 bg-gray-100 px-4 py-2 rounded-full transition-colors duration-300 ease-in-out hover:bg-blue-500">
          <a href="" ng-click="setActiveContent('content3')" class="text-gray-700 hover:text-gray-900 font-bold">Admin</a>
        </div>
        <div class="navbar mr-4 bg-gray-100 px-4 py-2 rounded-full transition-colors duration-300 ease-in-out hover:bg-blue-500">
          <a href="" ng-click="setActiveContent('content1')" class="text-gray-700 hover:text-gray-900 font-bold">Mentor</a>
        </div>
        <div class="navbar bg-gray-100 px-4 py-2 rounded-full transition-colors duration-300 ease-in-out hover:bg-blue-500">
          <a href="" ng-click="setActiveContent('content2')" class="text-gray-700 hover:text-gray-900 font-bold">Student</a>
        </div>
      </div>  
      <div class="content" ng-show="activeContent === 'content1'">
        <div class="mentor">
          <form ng-submit="mentor_login()">
            <div class="flex items-center justify-center">
              <div class="relative flex flex-col m-6 space-y-8 bg-white shadow-2xl rounded-2xl md:flex-row md:space-y-0">
              <div class="flex flex-col justify-center p-8 md:p-14">
                <span class="mb-3 text-4xl font-bold">Login</span>
                <span class="font-light text-gray-400 mb-8">
                  Welcome back! Please enter your details
                </span>
                <div class="py-4">
                  <span class="mb-2 text-md">Mentor ID</span>
                  <input
                    type="text"
                    class="w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500"
                    name="mentor_id"
                    ng-model="mentorCredentials.mentor_id"
                    id="mentor_id"
                  />
                </div>
                <div class="py-4">
                  <span class="mb-2 text-md">Password</span>
                  <input
                    type="password"
                    name="password"
                    id="mpass"
                    ng-model="mentorCredentials.password"
                    class="w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500"/>
                </div>
                <div class="flex justify-between w-full py-4">
                  <span class="font-bold text-md">Forgot password</span>
                </div>
                <button
                  class="w-full bg-blue-500 text-white p-2 rounded-lg mb-6 hover:bg-white hover:text-black hover:border hover:border-gray-300" type="submit" value="login">
                  Log in
                </button>
                <div class="text-center text-gray-400">
                  Dont'have an account?
                  <span class="font-bold text-black"><a href="/signup">Sign up</a></span>
                </div>
                <div class="text-center capitalize">
                  <p ng-show="mlogin.flag==404" class="text-red-500 ">{{ mlogin.msg }}</p>
              </div>
              </div>
              <div class="relative">
              <div class="h-24 bg-gradient-to-r from-sky-300 via-blue-500 to-blue-900 w-[400px] h-full hidden rounded-r-2xl md:block object-cover"></div>
            </div>
          </div>
          </form>
        </div>
      </div>
     </div>
     <div class="content" ng-show="activeContent === 'content2'">
      <div class="student">
        <form ng-submit="student_login()">
          <div class="flex items-center justify-center">
            <div class="relative flex flex-col m-6 space-y-8 bg-gray-800 shadow-2xl rounded-2xl text-white md:flex-row md:space-y-0">
              <div class="flex flex-col justify-center p-8 md:p-14">
                <span class="mb-3 text-4xl font-bold">Login</span>
                <span class="font-light text-gray-400 mb-8">
                  Welcome back! Please enter your details
                </span>
                <div class="py-4">
                  <span class="mb-2 text-md">USN</span>
                  <input
                    type="text"
                    class="w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500 bg-gray-700 text-white"
                    name="usn"
                    ng-model="studentCredentials.usn"
                    id="usn"
                  />
                </div>
                <div class="py-4">
                  <span class="mb-2 text-md">Password</span>
                  <input
                    type="password"
                    name="password"
                    id="spass"
                    ng-model="studentCredentials.password"
                    class="w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500 bg-gray-700 text-white"
                  />
                </div>
                <div class="flex justify-between w-full py-4">
                  <span class="font-bold text-md">Forgot password</span>
                </div>
                <button
                  class="w-full bg-blue-500 text-white p-2 rounded-lg mb-6 hover:bg-white hover:text-black hover:border hover:border-gray-300"
                  type="submit"
                  value="login"
                >
                  Log in
                </button>
                <div class="text-center text-white-400">
                  Dont'have an account?
                  <span class="font-bold text-white"><a href="/signup">Sign up</a></span>
                </div>
                <div class="text-center">
                  <p ng-show="slogin.flag==404" class="text-red-500">{{ slogin.msg }}</p>
                </div>
              </div>
              <div class="relative">
                <div class="h-24 bg-gradient-to-r from-blue-900 via-blue-500 to-sky-300 w-[400px] h-full hidden rounded-r-2xl md:block object-cover"></div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="content" ng-show="activeContent === 'content3'">
      <div class="mentor">
        <form ng-submit="admin_login()">
          <div class="flex items-center justify-center">
            <div class="relative flex flex-col m-6 space-y-8 bg-white shadow-2xl rounded-2xl md:flex-row md:space-y-0">
            <div class="flex flex-col justify-center p-8 md:p-14">
              <span class="mb-3 text-4xl font-bold">Login</span>
              <span class="font-light text-gray-400 mb-8">
                Welcome back! Please enter your details
              </span>
              <div class="py-4">
                <span class="mb-2 text-md">Admin ID</span>
                <input
                  type="text"
                  class="w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500"
                  name="mentor_id"
                  ng-model="adminCredentials.admin_id"
                  id="mentor_id"
                />
              </div>
              <div class="py-4">
                <span class="mb-2 text-md">Password</span>
                <input
                  type="password"
                  name="password"
                  id="mpass"
                  ng-model="adminCredentials.password"
                  class="w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500"/>
              </div>
              <button
                class="w-full bg-blue-500 text-white p-2 rounded-lg mb-6 hover:bg-white hover:text-black hover:border hover:border-gray-300" type="submit" value="login">
                Log in
              </button>
              <div class="text-center capitalize">
                <p ng-show="alogin.flag==404" class="text-red-500 ">{{ alogin.msg }}</p>
            </div>
            </div>
            <div class="relative">
            <div class="h-24 bg-gradient-to-r from-sky-300 via-blue-500 to-blue-900 w-[400px] h-full hidden rounded-r-2xl md:block object-cover"></div>
          </div>
        </div>
        </form>
      </div>
    </div>    
    <script>
      angular.module('myApp', [])
        .controller('myController', ['$scope', '$http', '$window', function ($scope, $http, $window) {
                $window.localStorage.clear();
                $scope.mentorCredentials = {};
                $scope.studentCredentials = {};
                $scope.mentor_login = function () {
                    $http.post('/mentor_login', $scope.mentorCredentials)
                        .then(function (response) { 
                            const session_id = response.data.session_id;
                            localStorage.setItem('mentor_session_id', session_id);
                            $scope.mlogin = response.data;
                            const mentorlogin = response.data;
                            if (mentorlogin.flag == 200) {
                              try {
                                  $window.location.href = "/mentor_students_fetch";
                              } catch (error) {
                                  console.error('Error redirecting to mentor main page:', error);
                              }
                            }
                        })
                        .catch(function (error) {
                            console.error(error);
                        });
                };
                $scope.admin_login = function () {
                    $http.post('/admin_login', $scope.adminCredentials)
                        .then(function (response) { 
                            const session_id = response.data.session_id;
                            localStorage.setItem('admin_session_id', session_id);
                            $scope.alogin = response.data;
                            const adminlogin = response.data;
                            if (adminlogin.flag == 200) {
                              try {
                                  $window.location.href = "/admin_pool";
                              } catch (error) {
                                  console.error('Error redirecting to mentor main page:', error);
                              }
                            }
                        })
                        .catch(function (error) {
                            console.error(error);
                        });
                };
                $scope.student_login = function () {
                    $http.post('/student_login', $scope.studentCredentials)
                        .then(function (response) { 
                            const session_id = response.data.session_id;
                            localStorage.setItem('student_session_id', session_id);   
                            $scope.slogin = response.data;
                            const studentlogin = response.data;
                            if (studentlogin.flag == 200) {
                                try {
                                    $window.location.href = "/student_academic_fetch";
                                } catch (error) {
                                    console.error('Error redirecting to student main page:', error);
                                }
                            }
                        })
                        .catch(function (error) {
                            console.error(error);
                        });
                };
                $scope.activeContent = 'content1'; 
                $scope.setActiveContent = function(content) {
                  $scope.activeContent = content;
                  if (content === 'content1') {
                    $scope.bodyBackgroundColor = '#FFFFFF'; // White background for mentor
                  }
                  else {
                    $scope.bodyBackgroundColor = '#000000'; // Black background for student
                  }
                };
            }]);
    </script>
    
  </body>
</html>

